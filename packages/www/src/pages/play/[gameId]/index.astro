---
import { actions } from "astro:actions";
import Layout from "../../../layouts/Layout.astro";

const { gameId } = Astro.params;

if (!gameId) {
  throw new Error("NOT FOUND");
}

const { data } = await Astro.callAction(actions.game.getById, {
  id: gameId,
});
---

<Layout>
  <div>
    <div>Game: {JSON.stringify(data)}</div>
    <div>
      {
        data?.startMovieId && (
          <a href={`/play/${gameId}/m/${data.startMovieId}`}>Start</a>
        )
      }
      {
        data?.startPersonId && (
          <a href={`/play/${gameId}/p/${data.startPersonId}`}>Start</a>
        )
      }
    </div>
  </div>
</Layout>
